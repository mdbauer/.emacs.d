library(Rcpp)
cppFunction('
bool same_elements(int a[], int b[], int n) {
  /* checks whether two arrays have the same elements
     with the same multiplicities */
  for (int i=0; i<n; i++) {
    // search for a[i] in b[i:n];
    int tmp = b[i];
    int j = i;
    while (j < n && a[i] != b[j])
      j++;
    if (a[i] == b[j]) {
      // if found, switch with b[i], next i
      b[i] = b[j];
      b[j] = tmp;
    } else {
      // if not found, exit with false
      return(false);
    }
  }
  return(true);
}
)
add # like a regular R function, printing displays info about the function
add(1, 2, 3)
